<!DOCTYPE html>
<html lang="zh-CN">

{{ template "head.tpl.html" . }}

<body class="bg-background text-muted p-4 pt-10 flex flex-col min-h-screen max-w-screen-lg mx-auto justify-center">

{{ template "header.tpl.html" . }}

{{ template "alerts.tpl.html" . }}

<main class="mt-10 grow flex justify-center w-full">
    <div class="grow max-w-lg mt-10">
        <div class="mb-8">
<h1 class="h1">欢迎！</h1>
            <span class="text-secondary">登录以继续使用 Wakapi。首次使用？查看<a href="setup" class="text-foreground hover:text-secondary">设置说明</a>。</span>
        </div>
        <form action="login" method="post">
            <div class="mb-4">
                <input class="input-default"
                       type="text" id="username" autocomplete="username"
                       name="username" placeholder="用户名" minlength="1" required autofocus>
            </div>
            <div class="mb-4">
                <input class="input-default"
                       type="password" id="password" autocomplete="current-password"
                       name="password" placeholder="密码" minlength="6" required>
            </div>
            <div class="flex justify-between items-center">
<a href="reset-password" class="text-muted text-sm">
                    忘记密码？
                </a>
                <div class="flex space-x-2">
                    {{ if .AllowSignup }}
                    <a href="signup">
                        <button type="button" class="btn-default">注册</button>
                    </a>
                    {{ else }}
<a title="此实例的管理员已禁用注册功能。">
                        <button type="button" class="btn-disabled" disabled> 注册 </button>
                    </a>
                    {{ end }}
                    <button type="submit" class="btn-primary">登录</button>
                </div>
            </div>
        </form>

        {{ if len .OidcProviders }}
        <div class="mt-10">
            <div class="font-semibold mb-2 text-secondary">单点登录</div>
            {{ range $provider := .OidcProviders }}
            <a href="oidc/{{ $provider.Name | lower }}/login" class="block mb-2">
                <button type="button" class="btn-default w-full flex items-center gap-2 justify-center">
                    {{ if $.OidcProviderIcon $provider.Name }}
                    <span class="iconify inline text-white text-base" data-icon="{{ ($.OidcProviderIcon $provider.Name) | urlSafe }}"></span>
                    {{ end }}
                    使用 {{ $provider.DisplayName }} 登录
                </button>
            </a>
            {{ end }}
        </div>
        {{ end }}
    </div>
</main>

{{ template "footer.tpl.html" . }}

{{ template "foot.tpl.html" . }}
</body>

</html>
