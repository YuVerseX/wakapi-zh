<!DOCTYPE html>
<html lang="zh-CN">

{{ template "head.tpl.html" . }}

<script>
    const defaultTab = 'total'
</script>

<body class="relative bg-background text-muted p-4 pt-10 flex flex-col min-h-screen {{ if .User }} max-w-screen-xl {{ else }} max-w-screen-lg {{end}} mx-auto justify-center">

{{ template "alerts.tpl.html" . }}

{{ if .User }}
{{ template "menu-main.tpl.html" . }}
{{ else }}
{{ template "header.tpl.html" . }}
{{ template "login-btn.tpl.html" . }}
{{ end }}

<main class="mt-10 grow flex justify-center w-full" id="leaderboard-page">
    <div class="flex flex-col grow mt-10 max-available">
        <div class="flex items-center justify-start" style="margin-bottom: 0.5rem">
            <h1 class="h1 inline-block">æ’è¡Œæ¦œ</h1>
            {{ if .IntervalLabel }}
            <span class="text-muted text-xl inline-block ml-1">&nbsp;({{ .IntervalLabel }})</span>
            {{ end }}
        </div>

<p class="block text-sm text-foreground w-full lg:w-3/4 mb-8">
            Wakapi æ’è¡Œæ¦œæ˜¾ç¤ºæ­¤æœåŠ¡å™¨ä¸Šæœ€æ´»è·ƒç”¨æˆ·çš„æ’åï¼Œå‰ææ˜¯ä»–ä»¬é€‰æ‹©åŠ å…¥å…¬å¼€æ’è¡Œæ¦œã€‚ç»Ÿè®¡æ•°æ®è‡³å°‘æ¯ 12 å°æ—¶æ›´æ–°ä¸€æ¬¡ï¼ŒåŸºäºç”¨æˆ·åœ¨é¢„å®šä¹‰æ—¶é—´æ®µå†…çš„æ€»ç¼–ç æ—¶é•¿ã€‚
            è¦å‚ä¸æ’è¡Œæ¦œï¼Œè¯·ç™»å½•åå‰å¾€ <a class="link" href="settings#permissions">è®¾ç½® ğŸ ’ æƒé™</a> å¹¶å¯ç”¨æ’è¡Œæ¦œåŠŸèƒ½ã€‚
        </p>

        <ul class="flex space-x-4 mb-4 text-muted">
            <li class="font-semibold text-xl {{ if eq .By "" }} text-foreground {{ else }} hover:text-secondary {{ end }}">
                <a href="leaderboard">æ€»è®¡</a>
            </li>
            <li class="font-semibold text-xl {{ if eq .By "language" }} text-foreground {{ else }} hover:text-secondary {{ end }}">
                <a href="leaderboard?by=language">æŒ‰è¯­è¨€</a>
            </li>
        </ul>

        {{ if ne .By "" }}
        <div class="flex flex-wrap space-x-2 mb-4">
            {{ range $i, $key := (strslice .TopKeys 0 10) }}
            <div class="inline-block mb-4">
                <a href="leaderboard?by={{ $.By }}&key={{ lower $key }}" class="{{ if eq (lower $.Key) (lower $key) }} btn-primary {{ else }} btn-default {{ end }} btn-small cursor-pointer whitespace-nowrap">
                    {{ if and (eq (lower $.By) "language") ($.LangIcon $key) }}
                    <span class="align-middle leading-none"><span class="iconify inline text-white text-base" data-icon="{{ ($.LangIcon $key) | urlSafe }}"></span>&nbsp;</span>
                    {{ end }}
                    <span>{{ $key }}</span>
                </a>
            </div>
            {{ end }}
        </div>
        {{ end }}

        <div class="flex flex-col space-y-4 mt-4 text-foreground w-full lg:w-3/4">
            {{ if len .Items }}
            <ol>
                {{ range $i, $item := .Items }}
                <li class="px-4 py-2 my-2 rounded-md border-2 leaderboard-{{ ($.ColorModifier $item $.User) }} flex justify-between">
                    <div class="w-12"><strong># {{ $item.Rank }}</strong></div>
                    <div class="flex flex-grow w-16 mx-1 justify-start items-center space-x-4 align-middle">
                        {{ if avatarUrlTemplate }}
                        <img src="{{ $item.User.AvatarURL avatarUrlTemplate }}" width="24px" class="rounded-full border-accent" alt="ç”¨æˆ·å¤´åƒ"/>
                        {{ else }}
                        <span class="iconify inline cursor-pointer text-secondary rounded-full border-accent" style="width: 24px; height: 24px" data-icon="ic:round-person"></span>
                        {{ end }}
                        <div>
                            <strong class="text-ellipsis truncate">@{{ $item.UserID }}</strong>
                            {{ if $item.User.HasActiveSubscription }}
                            <span class="iconify inline text-gold ml-1" data-icon="jam:crown-f" style="margin-bottom: -2px" title="{{ $item.UserID }} æ˜¯ Wakapi çš„æ”¯æŒè€…ï¼"></span>
                            {{ end }}
                        </div>
                    </div>
                    <div class="flex-1 mx-1 hidden sm:inline-block truncate leading-6 align-middle">
                        {{ range $i, $lang := (index $.UserLanguages $item.UserID) }}
                        {{ if $.LangIcon $lang }}
                        <span class="align-middle leading-none"><span class="iconify inline text-white text-base" data-icon="{{ ($.LangIcon $lang) | urlSafe }}"></span></span>
                        {{ end }}
                        <span class="text-sm leading-6">{{ $lang }}{{ if lt $i (add (len (index $.UserLanguages $item.UserID)) -1) }},&nbsp;{{ end }}</span>
                        {{ end }}
                    </div>
                    <div class="flex-1 ml-1 text-right"><span>{{ $item.Total | duration }}</span></div>
                </li>
                {{ end }}
            </ol>
            <p class="text-sm pt-8">æœ€åæ›´æ–°ï¼š{{ .LastUpdate | datetimetz }}</p>
            {{ else }}
<p>
                <span class="iconify inline text-white text-base" data-icon="twemoji:frowning-face"></span>&nbsp;
                æ’è¡Œæ¦œç›®å‰ä¸ºç©º...
            </p>
            {{ end }}

        </div>
    </div>
</main>

{{ template "footer.tpl.html" . }}

{{ template "foot.tpl.html" . }}
</body>

</html>
